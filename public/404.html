<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Redirecting...</title>
    <script>
      // GitHub Pages serves this 404 page for unknown paths.
      // Fetch the app's index.html from the project site root and inject it so the SPA router can handle the path.
      (function () {
        var base = '/virtual_island'; // repository project page base (owner.github.io/virtual_island)
        var indexPath = base + '/index.html';
        fetch(indexPath, {cache: 'no-store'}).then(function (response) {
          if (response.status === 200) return response.text();
          // if index can't be fetched, just redirect to the site root
          window.location.replace(base + '/');
        }).then(function (html) {
          if (!html) return;
          document.open();
          document.write(html);
          document.close();
          // restore original URL so the SPA router sees it
          history.replaceState({}, '', location.pathname + location.search + location.hash);
        }).catch(function () {
          window.location.replace(base + '/');
        });
      })();
    </script>
  </head>
  <body>
    Redirecting to the app...
  </body>
</html>
